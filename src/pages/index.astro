---
// src/pages/index.astro
import TaskCard from '../components/TaskCard.astro';
import ProgressSummary from '../components/ProgressSummary.astro';

const tasks = await import('../data/tasks.json').then(m => m.default);

const todoTasks = tasks.filter(t => t.status === 'todo');
const inProgressTasks = tasks.filter(t => t.status === 'in_progress');
const doneTasks = tasks.filter(t => t.status === 'done');
---

<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æˆ‘çš„åšå£«è®ºæ–‡çœ‹æ¿</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; margin: 0; padding: 2rem; background: #f9fafb; }
    .container { max-width: 1200px; margin: 0 auto; }
    .header { text-align: center; margin-bottom: 2rem; }
    .columns { display: flex; gap: 1.5rem; margin-top: 2rem; }
    .column { flex: 1; background: white; border-radius: 8px; padding: 1rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .column h2 { margin-top: 0; font-size: 1.1rem; color: #4b5563; }
    .about { margin-top: 3rem; padding: 1.5rem; background: #f0fdf4; border-left: 4px solid #10b981; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ“ åšå£«è®ºæ–‡å†™ä½œçœ‹æ¿</h1>
      <p>å®æ—¶è¿½è¸ªè¿›åº¦ Â· ç‰ˆæœ¬å—æ§äº GitHub</p>
    </div>

    <ProgressSummary 
      total={tasks.length} 
      completed={doneTasks.length} 
    />

    <div class="columns">
      <div class="column">
        <h2>ğŸŸ¡ å¾…åŠ (To Do)</h2>
        {todoTasks.map(task => <TaskCard task={task} />)}
      </div>
      <div class="column">
        <h2>ğŸ”µ è¿›è¡Œä¸­ (In Progress)</h2>
        {inProgressTasks.map(task => <TaskCard task={task} />)}
      </div>
      <div class="column">
        <h2>ğŸŸ¢ å·²å®Œæˆ (Done)</h2>
        {doneTasks.map(task => <TaskCard task={task} />)}
      </div>
    </div>

    <div class="about">
      <h3>å…³äºè¿™ä¸ªçœ‹æ¿</h3>
      <p>è¿™æ˜¯æˆ‘åœ¨æ”»è¯»åšå£«å­¦ä½æœŸé—´ç”¨äºç®¡ç†è®ºæ–‡å†™ä½œçš„ä¸ªäººä»ªè¡¨ç›˜ã€‚æ‰€æœ‰ä»»åŠ¡æ•°æ®å­˜å‚¨åœ¨ <code>tasks.json</code> ä¸­ï¼Œé€šè¿‡ Git è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œå¹¶è‡ªåŠ¨éƒ¨ç½²åˆ°è‡ªå®šä¹‰åŸŸåã€‚å®ƒä½“ç°äº†æˆ‘å¯¹é¡¹ç›®ç®¡ç†ã€è‡ªåŠ¨åŒ–å’Œé€æ˜å·¥ä½œçš„é‡è§†ã€‚</p>
      <p>æºç ï¼š<a href="https://github.com/yourname/thesis-dashboard" target="_blank">github.com/yourname/thesis-dashboard</a></p>
    </div>
  </div>
</body>
</html>
